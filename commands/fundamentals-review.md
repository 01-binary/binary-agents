---
description: Toss Fundamentals 4개 에이전트 + React 상태관리 리뷰를 병렬 실행
allowed-tools: Task, Read, Glob, Grep
---

# Fundamentals + 상태관리 리뷰

Toss Frontend Fundamentals 4개 원칙(가독성, 예측 가능성, 응집도, 결합도)과 React 상태관리 패턴을 병렬로 분석하는 집중 리뷰 커맨드입니다.

## 컨텍스트 정보

**리뷰 대상 경로:**
!`echo "${1:-.}"`

**현재 git 상태:**
!`git status --short | head -20`

**React 프로젝트 감지:**
!`if [ -f "package.json" ] && grep -q '"react"' package.json 2>/dev/null; then echo "✅ React 프로젝트"; else echo "❌ React 프로젝트 아님"; fi`

## 사용 에이전트

| Agent | 초점 영역 | 실행 조건 |
|-------|----------|----------|
| `fundamentals-readability` | 가독성 (코드 분리, 추상화, 함수 쪼개기, 조건 네이밍, 매직 넘버, 시점 이동, 삼항 연산자, 비교 순서) | 항상 |
| `fundamentals-predictability` | 예측 가능성 (이름 충돌, 반환 타입 통일, 숨은 로직) | 항상 |
| `fundamentals-cohesion` | 응집도 (디렉토리 구조, 매직 넘버 관리, 폼 응집도) | 항상 |
| `fundamentals-coupling` | 결합도 (단일 책임, 중복 코드 허용, Props Drilling) | 항상 |
| `react-state-reviewer` | 상태관리 (상태 성질 기반 배치, Context 오용, 5단계 에스컬레이터) | React 프로젝트 |

## 작업 순서

1. **리뷰 범위 결정**
   - **경로가 제공된 경우:** 해당 경로의 모든 파일을 리뷰
   - **경로가 없는 경우:** 현재 작업 디렉토리 전체를 리뷰

   > **중요:** git 변경사항에 제한하지 마세요. 대상 경로의 모든 파일을 리뷰합니다.

2. **React 프로젝트 여부 확인**

   다음 중 하나라도 해당되면 React 프로젝트:
   - package.json에 `react` 또는 `next` 의존성 존재
   - `.tsx` 또는 `.jsx` 파일 존재

3. **에이전트 병렬 실행**

   Fundamentals 4개는 항상 실행. React 프로젝트면 react-state-reviewer도 추가.

   ```
   // 항상 실행 (4개 병렬)
   Task(fundamentals-readability): "[path]를 가독성 원칙으로 분석하세요. 코드 분리, 추상화, 함수 쪼개기, 조건 네이밍, 매직 넘버, 시점 이동, 삼항 연산자, 비교 순서를 확인하세요. file:line 참조와 함께 발견사항을 반환하세요."

   Task(fundamentals-predictability): "[path]를 예측 가능성 원칙으로 분석하세요. 이름 충돌, 반환 타입 통일, 숨은 로직을 확인하세요. file:line 참조와 함께 발견사항을 반환하세요."

   Task(fundamentals-cohesion): "[path]를 응집도 원칙으로 분석하세요. 디렉토리 구조, 매직 넘버 관리, 폼 응집도를 확인하세요. file:line 참조와 함께 발견사항을 반환하세요."

   Task(fundamentals-coupling): "[path]를 결합도 원칙으로 분석하세요. 단일 책임, 중복 코드 허용, Props Drilling을 확인하세요. file:line 참조와 함께 발견사항을 반환하세요."

   // React 프로젝트면 추가
   Task(react-state-reviewer): "[path]의 상태관리 패턴을 리뷰하세요. 상태 성질(수명/범위/빈도) 기반 도구 적절성, Context 오용, 5단계 에스컬레이터 준수, 서버/클라이언트 상태 분리를 확인하세요. file:line 참조와 함께 발견사항을 반환하세요."
   ```

4. **결과 집계 및 종합**
   - 모든 에이전트 완료 대기
   - 발견사항을 통합 리포트로 결합
   - 중복 발견사항 제거
   - 심각도와 영향도로 우선순위 정렬

## 출력 형식

```markdown
# Fundamentals + 상태관리 리뷰 결과

## 요약
- **리뷰 대상:** [path]
- **실행된 에이전트:** [list]
- **총 발견 사항:** N개 (Critical: X, Recommended Improvements: Y, Best Practices Found: Z)

---

## Critical Issues (즉시 수정 필요)

### 1. [Issue Title]
- **발견 에이전트:** [agent name]
- **위반 원칙:** [principle]
- **위치:** [file:line]
- **문제:** [description]
- **현재 코드:**
```typescript
// 문제 코드
```
- **수정 방법:**
```typescript
// 개선 코드
```

---

## Recommended Improvements (권장 개선)

[같은 형식]

---

## Best Practices Found (잘하고 있음)

- [Good practice 1] - [file:line] (에이전트)
- [Good practice 2] - [file:line] (에이전트)

---

## 에이전트별 상세 결과

### Fundamentals - 가독성
[발견사항 요약]

### Fundamentals - 예측 가능성
[발견사항 요약]

### Fundamentals - 응집도
[발견사항 요약]

### Fundamentals - 결합도
[발견사항 요약]

### React 상태관리 (React 프로젝트만)
[발견사항 요약]

---

## Metrics

### 원칙별 현황

| 원칙 | Critical | Recommended | Best Practices |
|------|----------|-------------|----------------|
| 가독성 | N | N | N |
| 예측 가능성 | N | N | N |
| 응집도 | N | N | N |
| 결합도 | N | N | N |
| 상태관리 | N | N | N |

### 상태 배치 현황 (React 프로젝트만)

| 카테고리 | 개수 | 적절 | 부적절 |
|----------|------|------|--------|
| useState | N | N | N |
| Context API | N | N | N |
| 전역 스토어 | N | N | N |
| 서버 상태 | N | N | N |
```

## 사용 예시

```bash
# 전체 프로젝트 리뷰
/fundamentals-review

# 특정 경로 리뷰
/fundamentals-review src/components
```

## 중요 사항

- **병렬 실행** - 5개 에이전트를 동시에 실행하여 빠르게 분석
- **React 자동 감지** - React 프로젝트가 아니면 상태관리 리뷰 생략
- **file:line 참조 보존** - 실행 가능한 피드백을 위해 필수
- **한국어 출력** - 최종 리포트는 한국어로
- **AI attribution 금지** - "Generated by AI" footer 추가 금지
- **결과 파일 저장** - 최종 리포트를 `fundamentals-review.md` 파일로 저장 (이미 존재하면 `---` 구분선과 함께 하단에 추가)
